{"version":3,"file":"users-a4KTyEyc.mjs","sources":["../../admin/src/utils/users.ts"],"sourcesContent":["import type { User } from '../features/Auth';\n\n/* -------------------------------------------------------------------------------------------------\n * getDisplayName\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * Retrieves the display name of an admin panel user\n */\nconst getDisplayName = ({ firstname, lastname, username, email }: Partial<User> = {}): string => {\n  if (username) {\n    return username;\n  }\n\n  // firstname is not required if the user is created with a username\n  if (firstname) {\n    return `${firstname} ${lastname ?? ''}`.trim();\n  }\n\n  return email ?? '';\n};\n\n/* -------------------------------------------------------------------------------------------------\n * hashAdminUserEmail\n * -----------------------------------------------------------------------------------------------*/\n\nconst hashAdminUserEmail = async (payload?: User) => {\n  if (!payload || !payload.email) {\n    return null;\n  }\n\n  try {\n    return await digestMessage(payload.email);\n  } catch (error) {\n    return null;\n  }\n};\n\nconst bufferToHex = (buffer: ArrayBuffer) => {\n  return [...new Uint8Array(buffer)].map((b) => b.toString(16).padStart(2, '0')).join('');\n};\nconst digestMessage = async (message: string) => {\n  const msgUint8 = new TextEncoder().encode(message);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);\n\n  return bufferToHex(hashBuffer);\n};\n\nexport { getDisplayName, hashAdminUserEmail };\n"],"names":[],"mappings":"AASM,MAAA,cAAA,GAAiB,CAAC,EAAE,SAAA,EAAW,UAAU,QAAU,EAAA,KAAA,EAAyB,GAAA,EAAe,KAAA;AAC/F,EAAA,IAAI,QAAU,EAAA;AACZ,IAAO,OAAA,QAAA,CAAA;AAAA,GACT;AAGA,EAAA,IAAI,SAAW,EAAA;AACb,IAAA,OAAO,GAAG,SAAS,CAAA,CAAA,EAAI,QAAY,IAAA,EAAE,GAAG,IAAK,EAAA,CAAA;AAAA,GAC/C;AAEA,EAAA,OAAO,KAAS,IAAA,EAAA,CAAA;AAClB,EAAA;AAMM,MAAA,kBAAA,GAAqB,OAAO,OAAmB,KAAA;AACnD,EAAA,IAAI,CAAC,OAAA,IAAW,CAAC,OAAA,CAAQ,KAAO,EAAA;AAC9B,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAEA,EAAI,IAAA;AACF,IAAO,OAAA,MAAM,aAAc,CAAA,OAAA,CAAQ,KAAK,CAAA,CAAA;AAAA,WACjC,KAAO,EAAA;AACd,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACF,EAAA;AAEA,MAAM,WAAA,GAAc,CAAC,MAAwB,KAAA;AAC3C,EAAO,OAAA,CAAC,GAAG,IAAI,UAAA,CAAW,MAAM,CAAC,CAAA,CAAE,IAAI,CAAC,CAAA,KAAM,EAAE,QAAS,CAAA,EAAE,EAAE,QAAS,CAAA,CAAA,EAAG,GAAG,CAAC,CAAA,CAAE,KAAK,EAAE,CAAA,CAAA;AACxF,CAAA,CAAA;AACA,MAAM,aAAA,GAAgB,OAAO,OAAoB,KAAA;AAC/C,EAAA,MAAM,QAAW,GAAA,IAAI,WAAY,EAAA,CAAE,OAAO,OAAO,CAAA,CAAA;AACjD,EAAA,MAAM,aAAa,MAAM,MAAA,CAAO,MAAO,CAAA,MAAA,CAAO,WAAW,QAAQ,CAAA,CAAA;AAEjE,EAAA,OAAO,YAAY,UAAU,CAAA,CAAA;AAC/B,CAAA;;;;"}