{"version":3,"file":"AdminSeatInfo-k3KBzn4G.mjs","sources":["../../ee/admin/src/pages/SettingsPage/pages/ApplicationInfoPage/components/AdminSeatInfo.tsx"],"sourcesContent":["import { Flex, Tooltip, Typography, Link, Grid } from '@strapi/design-system';\nimport { ExternalLink, WarningCircle } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport { useRBAC } from '../../../../../../../../admin/src/hooks/useRBAC';\nimport { selectAdminPermissions } from '../../../../../../../../admin/src/selectors';\nimport { useLicenseLimits } from '../../../../../hooks/useLicenseLimits';\n\nconst BILLING_STRAPI_CLOUD_URL = 'https://cloud.strapi.io/profile/billing';\nconst BILLING_SELF_HOSTED_URL = 'https://strapi.io/billing/request-seats';\n\nexport const AdminSeatInfoEE = () => {\n  const { formatMessage } = useIntl();\n  const { settings } = useSelector(selectAdminPermissions);\n  const {\n    isLoading: isRBACLoading,\n    allowedActions: { canRead, canCreate, canUpdate, canDelete },\n  } = useRBAC(settings?.users ?? {});\n  const {\n    license,\n    isError,\n    isLoading: isLicenseLoading,\n  } = useLicenseLimits({\n    // TODO: this creates a waterfall which we should avoid to render earlier, but for that\n    // we will have to move away from data-fetching hooks to query functions.\n    // Short-term we could at least implement a loader, for the user to have visual feedback\n    // in case the requests take a while\n    enabled: !isRBACLoading && canRead && canCreate && canUpdate && canDelete,\n  });\n\n  const isLoading = isRBACLoading || isLicenseLoading;\n\n  if (isError || isLoading || !license) {\n    return null;\n  }\n\n  const { licenseLimitStatus, enforcementUserCount, permittedSeats, isHostedOnStrapiCloud } =\n    license;\n\n  if (!permittedSeats) {\n    return null;\n  }\n\n  return (\n    <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"stretch\">\n      <Typography variant=\"sigma\" textColor=\"neutral600\">\n        {formatMessage({\n          id: 'Settings.application.admin-seats',\n          defaultMessage: 'Admin seats',\n        })}\n      </Typography>\n      <Flex gap={2}>\n        <Flex>\n          <Typography tag=\"p\">\n            {formatMessage(\n              {\n                id: 'Settings.application.ee.admin-seats.count',\n                defaultMessage: '<text>{enforcementUserCount}</text>/{permittedSeats}',\n              },\n              {\n                permittedSeats,\n                enforcementUserCount,\n                text: (chunks) =>\n                  (\n                    <Typography\n                      fontWeight=\"semiBold\"\n                      textColor={enforcementUserCount > permittedSeats ? 'danger500' : undefined}\n                    >\n                      {chunks}\n                    </Typography>\n                  ) as any,\n              }\n            )}\n          </Typography>\n        </Flex>\n        {licenseLimitStatus === 'OVER_LIMIT' && (\n          <Tooltip\n            label={formatMessage({\n              id: 'Settings.application.ee.admin-seats.at-limit-tooltip',\n              defaultMessage: 'At limit: add seats to invite more users',\n            })}\n          >\n            <WarningCircle width=\"1.4rem\" height=\"1.4rem\" fill=\"danger500\" />\n          </Tooltip>\n        )}\n      </Flex>\n      <Link\n        href={isHostedOnStrapiCloud ? BILLING_STRAPI_CLOUD_URL : BILLING_SELF_HOSTED_URL}\n        isExternal\n        endIcon={<ExternalLink />}\n      >\n        {formatMessage(\n          {\n            id: 'Settings.application.ee.admin-seats.add-seats',\n            defaultMessage:\n              '{isHostedOnStrapiCloud, select, true {Add seats} other {Contact sales}}',\n          },\n          { isHostedOnStrapiCloud }\n        )}\n      </Link>\n    </Grid.Item>\n  );\n};\n"],"names":[],"mappings":"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"}